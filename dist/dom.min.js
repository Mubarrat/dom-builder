/*!
 * Dom-Builder JavaScript Library v3.0.7
 * https://github.com/Mubarrat/dom-builder/
 * 
 * Released under the MIT license
 * https://github.com/Mubarrat/dom-builder/blob/main/LICENSE
 */
function base_observable(e){const t=new Set;return e.subscribe=e=>(t.add(e),()=>t.delete(e)),e.notify=()=>t.forEach(t=>t(e())),e[Symbol.observable]="from",e.bindSelect=t=>(()=>t(e())).computed(e),e.bindMap=t=>e.bindSelect(e=>{if(null==e||"function"!=typeof e[Symbol.iterator])throw new Error("bindMap requires an iterable (Array, Set, Generator, etc.)");const o=[];let r=0;for(const n of e)o.push(t(n,r++));return o}),e.validatable=(t=()=>!0)=>Object.setPrototypeOf(Object.assign((...t)=>e(...t),{isValid:(()=>t(e())).computed(e)}),e),e.coercible=(t=e=>e)=>Object.setPrototypeOf((...o)=>{if(0===o.length)return e();const r=t(...o);return Array.isArray(r)?e(...r):e(r)},e),e.extend=t=>{const o=("function"==typeof t?t.call(e,e):t)||e;return o!==e&&Object.getPrototypeOf(o)!==e&&o!==Object.prototype&&Object.setPrototypeOf(o,e),o},e}Symbol.observable=Symbol("observable"),Function.prototype.computed=function(...e){const t=base_observable(this);return e.forEach(e=>e.subscribe(t.notify)),t},Object.defineProperties(Document.prototype,{$dom:{value(e){return new Proxy({},{get:(t,o)=>{const r=o.replace(/([A-Z])/g,"-$1").toLowerCase();return(...t)=>{const o=this.createElementNS(e,r);for(const b of i(t))if(null!=b&&!1!==b)if(b.constructor===Object&&void 0===b[Symbol.observable]&&void 0===b[Symbol.iterator])for(const[l,f]of Object.entries(b))if("style"===l)c(f,e=>"string"==typeof e?o.setAttribute("style",e):Object.entries(e).forEach(([e,t])=>c(t,t=>o.style[e]=t,()=>observeElementAttr(o,"style",()=>t(o.style[e])))),e=>observeElementAttr(o,"style",()=>f("string"==typeof e?o.getAttribute("style")||"":Object.assign({},o.style))));else if("on"===l&&"object"==typeof f)for(const[u,m]of Object.entries(f))for(const y of i([m]))"function"==typeof y&&o.addEventListener(u.toLowerCase(),y);else if(l.startsWith("on"))for(const p of i([f]))"function"==typeof p&&o.addEventListener(l.slice(2).toLowerCase(),p);else if("data"===l&&"object"==typeof f)for(const[d,g]of Object.entries(f))c(g,e=>o.dataset[d]="object"==typeof e?JSON.stringify(e):e,e=>observeElementAttr(o,`data-${d}`,()=>{const e=o.dataset[d];try{g(JSON.parse(e))}catch{g(e)}}));else if(l.toLowerCase().startsWith("ref"))for(const h of i([f]))"function"==typeof h&&h.bind(o,o);else"value"===l&&(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement)?c(f,e=>o.value=e,()=>o.addEventListener(o instanceof HTMLSelectElement?"change":"input",()=>f(o.value))):"checked"===l&&o instanceof HTMLInputElement&&("checkbox"===o.type||"radio"===o.type)?c(f,e=>o.checked=e,()=>o.addEventListener("change",()=>f(o.checked))):void 0!==f&&c(f,e=>l in o?o[l]=e:o.setAttribute(l,"object"==typeof e?JSON.stringify(e):e),()=>{let e=l in o?o[l]:o.getAttribute(l);try{f(JSON.parse(e))}catch{f(e)}});else if("to"===b?.[Symbol.observable]&&"function"==typeof b){const v=new Text;o.append(v);let w=[];function n(){for(const e of w)e.remove();let e=b();for(;"function"==typeof e;)e=e();const t=new DocumentFragment;t.append(...a(e).filter(e=>null!=e&&!1!==e)),w=Array.from(t.children),v.after(t)}n(),b.subscribe(n)}else o.append(...a(b).filter(e=>null!=e&&!1!==e));return o;function s(e){return!(null==e||"string"==typeof e||"function"==typeof e||"function"!=typeof e[Symbol.iterator]||e instanceof Node||e instanceof Date||e instanceof RegExp)}function i(e){return s(e)?Array.from(e).flatMap(i):[e]}function a(e){for(;"function"==typeof e;)e=e();return s(e)?Array.from(e).flatMap(a):[e]}function c(e,t,o){const r=e?.[Symbol.observable];if(!r)return void t(e);const n=e();t(n),"to"!==r&&"two-way"!==r||e.subscribe(t),"from"!==r&&"two-way"!==r||o?.(n)}}}})},configurable:!1,enumerable:!0},$html:{get(){return this.$html=this.$dom("http://www.w3.org/1999/xhtml")},configurable:!1,enumerable:!0},$svg:{get(){return this.$svg=this.$dom("http://www.w3.org/2000/svg")},configurable:!1,enumerable:!0},$mml:{get(){return this.$mml=this.$dom("http://www.w3.org/1998/Math/MathML")},configurable:!1,enumerable:!0}});const attributeObservers=new WeakMap;function observeElementAttr(e,t,o){let r=attributeObservers.get(e);r||attributeObservers.set(e,r=new Map);let n=r.get(t);n||r.set(t,n=new Set),n.add(o)}function observable(e=null){let t=e;const o=base_observable(function(e){return 0!==arguments.length&&t!==e&&(t=e,o.notify()),t});return o[Symbol.observable]="two-way",o.bindTo=Object.assign((...e)=>o(...e),{[Symbol.observable]:"to"}),o.bindFrom=Object.assign((...e)=>o(...e),{[Symbol.observable]:"from"}),Object.setPrototypeOf(o.bindTo,o),Object.setPrototypeOf(o.bindFrom,o),o}new MutationObserver(e=>e.forEach(e=>attributeObservers.get(e.target)?.get(e.attributeName)?.forEach(e=>e()))).observe(document,{attributes:!0,subtree:!0}),Object.defineProperties(Window.prototype,{$dom:{get(){return this.document.$dom},configurable:!1,enumerable:!0},$html:{get(){return this.document.$html},configurable:!1,enumerable:!0},$svg:{get(){return this.document.$svg},configurable:!1,enumerable:!0},$mml:{get(){return this.document.$mml},configurable:!1,enumerable:!0}});